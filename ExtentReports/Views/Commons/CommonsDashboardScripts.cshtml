<script>
	function drawChart(ctx, config) {
	    ctx.width = 100;
	    ctx.height = 80;
	    new Chart(ctx, config);
	}
	$(document).ready(function() {
		(function drawParentChart() {
			var config = {
		        type: 'doughnut',
		            data: {
		                datasets: [{
		                    borderColor: 'transparent',
		                    data: [
				                  @Model.ReportStatusStats.ParentCountPass,
				                  @Model.ReportStatusStats.ParentCountFail,
				                  @Model.ReportStatusStats.ParentCountFatal,
				                  @Model.ReportStatusStats.ParentCountError,
				                  @Model.ReportStatusStats.ParentCountWarning,
				                  @Model.ReportStatusStats.ParentCountSkip
		                    ],
		                    backgroundColor: [
		                        "#00af00", "#F7464A", "#8b0000", "#ff6347", "#FDB45C", "#1e90ff"
		                    ]
		                }],
		                labels: [ "Pass", "Fail", "Fatal", "Error", "Warning", "Skip" ]
		            },
		            options: {
		            	responsive: true,
		            	  maintainAspectRatio: false,
		            	  legend: {
		            	      position: "right",
		            	      labels: {
		            	    	  boxWidth: 7,
		            	          fontSize: 12,
		            	          fontColor: "#999"
		            	      }
		            	  },
		            	  cutoutPercentage: 70
		            }
		        };
	
		        var ctx = document.getElementById("pc").getContext('2d');
		        drawChart(ctx,config);
		})();
		(function drawChildChart() {
			if (document.getElementById("cc")!=null) {
				var config = {
			        type: 'doughnut',
			            data: {
			                datasets: [{
			                    borderColor: 'transparent',
			                    data: [
                            @Model.ReportStatusStats.ChildCountPass,
				                    @Model.ReportStatusStats.ChildCountFail,
				                    @Model.ReportStatusStats.ChildCountFatal,
				                    @Model.ReportStatusStats.ChildCountError,
				                    @Model.ReportStatusStats.ChildCountWarning,
				                    @Model.ReportStatusStats.ChildCountSkip
			                    ],
			                    backgroundColor: [
			                        "#00af00", "#F7464A", "#8b0000", "#ff6347", "#FDB45C", "#1e90ff"
			                    ]
			                }],
			                labels: [ "Pass", "Fail", "Fatal", "Error", "Warning", "Skip" ]
			            },
			            options: {
			            	responsive: true,
			            	  maintainAspectRatio: false,
			            	  legend: {
			            	      position: "right",
			            	      labels: {
			            	    	  boxWidth: 7,
			            	          fontSize: 12,
			            	          fontColor: "#999"
			            	      }
			            	  },
			            	  cutoutPercentage: 70
			            }
			        };
	
		        var ctx = document.getElementById("cc").getContext('2d');
		        drawChart(ctx,config);
			}
		})();
		(function drawGrandChildChart() {
			if (document.getElementById("gcc")!=null) {
				var config = {
			        type: 'doughnut',
			            data: {
			                datasets: [{
			                    borderColor: 'transparent',
			                    data: [
                            @Model.ReportStatusStats.GrandChildCountPass,
				                    @Model.ReportStatusStats.GrandChildCountFail,
				                    @Model.ReportStatusStats.GrandChildCountFatal,
				                    @Model.ReportStatusStats.GrandChildCountError,
				                    @Model.ReportStatusStats.GrandChildCountWarning,
				                    @Model.ReportStatusStats.GrandChildCountSkip
			                    ],
			                    backgroundColor: [
			                        "#00af00", "#F7464A", "#8b0000", "#ff6347", "#FDB45C", "#1e90ff"
			                    ]
			                }],
			                labels: [ "Pass", "Fail", "Fatal", "Error", "Warning", "Skip" ]
			            },
			            options: {
			            	responsive: true,
			            	  maintainAspectRatio: false,
			            	  legend: {
			            	      position: "right",
			            	      labels: {
			            	    	  boxWidth: 7,
			            	          fontSize: 12
			            	      }
			            	  },
			            	  cutoutPercentage: 70
			            }
			        };
		
		        var ctx = document.getElementById("gcc").getContext('2d');
		        drawChart(ctx,config);
			}
		})();
	})
</script>
  
@if (Model.MasterConfig.GetValue("enableTimeline") == "true")
{
	var json = "";
	for (int ix = 0; ix < Model.TestList.Count; ix++) {
		json += "\"" + Model.TestList[ix].Name + "\"" + ":" + Model.TestList[ix].RunDuration.TotalSeconds;
		if (ix != Model.TestList.Count-1) {
			json += ",";
		}
	}
<script>
    var timeline = {
        @json
    };
    function getRandomColor() {
        var letters = '0123456789ABCDEF';
        var color = '#';
        for (var i = 0; i < 6; i++) {
        	color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    }
    (function drawTimelineChart() {
        var datasets = [];
        for (var key in timeline) {
            datasets.push({ label:key, data: [ timeline[key] ], backgroundColor: getRandomColor(), borderWidth: 1 });
        }
        var ctx = document.getElementById('timeline').getContext('2d');
        new Chart(ctx, {
            type: 'horizontalBar',
            data: {
                datasets: datasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                tooltips: {
                    mode: 'point'
                },
                scales: {
                    xAxes: [{
                        stacked: true,
                        gridLines: false
                    }],
                    yAxes: [{
                        stacked: true,
                        gridLines: false,
                        barThickness: 15
                    }]
                },
                legend: {
                    display: false
                }
            }
        });
    })();
</script>
}